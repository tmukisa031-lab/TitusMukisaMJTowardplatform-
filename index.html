<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Universal Media Hub</title>
<style>
body { font-family: Arial, sans-serif; background:#111; color:#eee; text-align:center; margin:0; padding:0; }
h1,h2 { color:#0ff; margin:10px 0; }
.section { margin:20px auto; padding:15px; background:#222; border-radius:12px; width:90%; max-width:1000px; box-shadow:0 0 15px rgba(0,0,0,0.5); position:relative; }
input, select { width:95%; margin:8px 0; padding:8px; border-radius:8px; border:none; }
video, audio { width:100%; margin-top:10px;margin-bottom:10px; border-radius:8px; background:#000; max-height:1100px; }
.remote { display:flex; flex-wrap:wrap; justify-content:center; margin-top:10px; gap:6px; }
.remote button { padding:10px 14px; border:none; border-radius:8px; background:#333; color:#0ff; cursor:pointer; font-size:14px; }
.remote button:hover { background:#0ff; color:#000; }
#guideOverlay { position:absolute; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.6); display:flex; flex-direction:column; justify-content:center; align-items:center; color:#0ff; font-size:20px; font-weight:bold; text-shadow:2px 2px 4px #000; }
#guideOverlay img { max-width:90%; max-height:70%; margin-bottom:10px; border-radius:12px; box-shadow:0 0 20px rgba(0,0,0,0.8); }
#guideOverlay button { margin-top:12px; padding:8px 16px; border:none; border-radius:8px; background:#0ff; color:#000; cursor:pointer; }
.tv-frame { width:100%; max-width:900px; height:170px; background:#111; border:15px solid #333; border-radius:15px; box-shadow:0 0 40px rgba(0,0,0,0.8); overflow:hidden; position:relative; margin:0 auto; }
</style>
</head>
<body>
<h1>üåç Universal Media Hub</h1>

<!-- TV / IPTV Section -->
<div class="section">
  <h2>üì∫ TV / IPTV</h2>
  <input type="text" id="tvSearch" placeholder="Search TV channel..." onkeyup="searchTV()">
  <select id="tvSelect" size="6" onchange="playTV()"></select>
  <div class="tv-frame">
    <video id="tvPlayer" controls></video>
    <div id="guideOverlay" style="display:none;">
      <img id="guideImg" src="" alt="Guide Slide">
      <div id="guideText"></div>
      <button onclick="stopGuide()">Close Guide</button>
    </div>
  </div>
  <div class="remote">
    <button onclick="prevTV()">‚èÆ Prev</button>
    <button onclick="playTV()">‚ñ∂Ô∏è Play</button>
    <button onclick="pauseTV()">‚è∏ Pause</button>
    <button onclick="stopTV()">‚èπ Stop</button>
    <button onclick="toggleMuteTV()">üîá Mute</button>
    <button onclick="nextTV()">‚è≠ Next</button>
    <button onclick="switchToGuide()">üì∫ Guide</button>
    <button onclick="pressNumber(1)">1</button>
    <button onclick="pressNumber(2)">2</button>
    <button onclick="pressNumber(3)">3</button>
    <button onclick="pressNumber(4)">4</button>
    <button onclick="pressNumber(5)">5</button>
    <button onclick="pressNumber(6)">6</button>
    <button onclick="pressNumber(7)">7</button>
    <button onclick="pressNumber(8)">8</button>
    <button onclick="pressNumber(9)">9</button>
    <button onclick="pressNumber(0)">0</button>
    <button onclick="goToChannel()">Enter</button>
    <button onclick="infoTV()">‚ÑπÔ∏è Info</button>
  </div>
</div>

<!-- FM Section -->
<div class="section">
  <h2>üìª FM Radio</h2>
  <input type="text" id="fmSearch" placeholder="Search FM station..." onkeyup="searchFM()">
  <select id="fmSelect" size="6" onchange="playFM()"></select>
  <audio id="fmPlayer" controls></audio>
  <div class="remote">
    <button onclick="prevFM()">‚èÆ Prev</button>
    <button onclick="playFM()">‚ñ∂Ô∏è Play</button>
    <button onclick="pauseFM()">‚è∏ Pause</button>
    <button onclick="stopFM()">‚èπ Stop</button>
    <button onclick="toggleMuteFM()">üîá Mute</button>
    <button onclick="nextFM()">‚è≠ Next</button>
  </div>
</div>

<!-- Audio Section -->
<div class="section">
  <h2>üé∂ Audio / Music</h2>
  <input type="text" id="audioSearch" placeholder="Search audio..." onkeyup="searchAudio()">
  <input type="file" id="audioUpload" accept="audio/*" onchange="uploadAudio()">
  <select id="audioSelect" size="6" onchange="playAudio()"></select>
  <audio id="audioPlayer" controls></audio>
  <button onclick="downloadAudio()">‚¨á Download Selected</button>
</div>

<!-- Video Section -->
<div class="section">
  <h2>üé• Video / Movies</h2>
  <input type="text" id="videoSearch" placeholder="Search video..." onkeyup="searchVideo()">
  <input type="file" id="videoUpload" accept="video/*" onchange="uploadVideo()">
  <select id="videoSelect" size="6" onchange="playVideo()"></select>
  <video id="videoPlayer" controls></video>
  <button onclick="downloadVideo()">‚¨á Download Selected</button>
</div>

<!-- Subscription Section -->
<div class="section">
  <h2>üí≥ Subscription Access</h2>
  <p>Select a plan to unlock premium IPTV & Radio channels:</p>
  <button onclick="subscribePrompt('1d')">üìÜ 1 Day (UGX 1000)</button>
  <button onclick="subscribePrompt('1w')">üóì 1 Week (UGX 5000)</button>
  <button onclick="subscribePrompt('1m')">üóì 1 Month (UGX 15000)</button>
  <button onclick="subscribePrompt('unlimited')">‚ôæ Unlimited (UGX 45.5/hour)</button>
  <p id="subStatus">Status: Free Mode</p>
</div>

<script>
// --- Media Lists ---
let tvChannels=[ /* Your TV channels */ ];
let fmStations=[ /* Your FM stations */ ];
let audioTracks=[], videoClips=[];

// --- Subscription Tracking ---
let subscribed=false;
let subscriptionExpiry=null;

// --- Load Lists ---
function loadLists(){
  const tvSel=document.getElementById("tvSelect"); tvSel.innerHTML="";
  tvChannels.forEach(c=>tvSel.add(new Option(c.name,c.url)));
  const fmSel=document.getElementById("fmSelect"); fmSel.innerHTML="";
  fmStations.forEach(s=>fmSel.add(new Option(s.name,s.url)));
  refreshAudio(); refreshVideo();
}

// --- Subscription Payment Prompt ---
function subscribePrompt(plan){
  let amount=0;
  switch(plan){
    case '1d': amount=1000; break;
    case '1w': amount=5000; break;
    case '1m': amount=15000; break;
    case 'unlimited':
      amount = parseFloat(prompt("Enter amount to pay for unlimited plan (UGX 45.5/hour):"));
      if(isNaN(amount) || amount<=0){ alert("Invalid amount."); return; }
      break;
  }

  let pin = prompt(`Confirm payment of UGX ${amount} via MTN Mobile Money.\nEnter your MTN PIN:`);

  if(pin){ 
    // Here, in real system you would call MTN API to verify transaction
    alert("Payment verified successfully!");
    activateSubscription(plan, amount);
  } else { alert("Payment cancelled."); }
}

function activateSubscription(plan, amount){
  let now = new Date();
  let expiry;
  switch(plan){
    case "1d": expiry=new Date(now.getTime() + 24*60*60*1000); break;
    case "1w": expiry=new Date(now.getTime() + 7*24*60*60*1000); break;
    case "1m": expiry=new Date(now.getTime() + 30*24*60*60*1000); break;
    case "unlimited":
      let hours = amount / 45.5;
      expiry = new Date(now.getTime() + hours*60*60*1000);
      break;
  }
  subscriptionExpiry = expiry;
  subscribed=true;
  document.getElementById("subStatus").innerText=`Status: Subscribed until ${expiry.toLocaleString()}`;
}

// --- Check Subscription ---
function checkSubscription(){
  if(!subscribed) return false;
  if(subscriptionExpiry && new Date()>subscriptionExpiry){
    subscribed=false;
    subscriptionExpiry=null;
    document.getElementById("subStatus").innerText="Status: Free Mode";
    alert("Your subscription has expired. Please renew.");
    return false;
  }
  return true;
}

// --- TV Controls ---
let tvIndex=0, tvPlayer=document.getElementById("tvPlayer"), numBuffer="";
function playTV(){ 
  if(!checkSubscription() && tvIndex>0) return;
  let sel=document.getElementById("tvSelect");
  let url=sel.value;
  tvIndex=sel.selectedIndex;
  if(url==="guide"){ startGuide(); } else { stopGuide(); tvPlayer.src=url; tvPlayer.play(); }
}
function pauseTV(){ tvPlayer.pause(); }
function stopTV(){ tvPlayer.pause(); tvPlayer.currentTime=0; }
function toggleMuteTV(){ tvPlayer.muted=!tvPlayer.muted; }
function nextTV(){ tvIndex=(tvIndex+1)%tvChannels.length; document.getElementById("tvSelect").selectedIndex=tvIndex; playTV(); }
function prevTV(){ tvIndex=(tvIndex+tvChannels.length)%tvChannels.length; document.getElementById("tvSelect").selectedIndex=tvIndex; playTV(); }
function pressNumber(n){ numBuffer+=n; }
function goToChannel(){ let idx=parseInt(numBuffer)-1; if(idx>=0 && idx<tvChannels.length){ tvIndex=idx; document.getElementById("tvSelect").selectedIndex=idx; playTV(); } numBuffer=""; }
function infoTV(){ alert("Channel Info: "+tvChannels[tvIndex].name); }

// --- Guide ---
let guideSlides=[ {img:"https://picsum.photos/800/400?random=1", text:"Welcome!"} ];
let guideIndex=0, guideTimer;
function startGuide(){ stopGuide(); document.getElementById("guideOverlay").style.display="flex"; showGuideSlide(); }
function showGuideSlide(){ let slide=guideSlides[guideIndex]; document.getElementById("guideImg").src=slide.img; document.getElementById("guideText").innerText=slide.text; guideIndex=(guideIndex+1)%guideSlides.length; guideTimer=setTimeout(showGuideSlide,4000); }
function stopGuide(){ clearTimeout(guideTimer); document.getElementById("guideOverlay").style.display="none"; }
function switchToGuide(){ document.getElementById("tvSelect").selectedIndex=0; playTV(); }

// --- FM Controls ---
let fmIndex=0, fmPlayer=document.getElementById("fmPlayer");
function playFM(){ if(!checkSubscription() && fmIndex>0) return; fmIndex=document.getElementById("fmSelect").selectedIndex; fmPlayer.src=document.getElementById("fmSelect").value; fmPlayer.play(); }
function pauseFM(){ fmPlayer.pause(); }
function stopFM(){ fmPlayer.pause(); fmPlayer.currentTime=0; }
function toggleMuteFM(){ fmPlayer.muted=!fmPlayer.muted; }
function nextFM(){ fmIndex=(fmIndex+1)%fmStations.length; document.getElementById("fmSelect").selectedIndex=fmIndex; playFM(); }
function prevFM(){ fmIndex=(fmIndex+fmStations.length)%fmStations.length; document.getElementById("fmSelect").selectedIndex=fmIndex; playFM(); }

// --- Audio/Video ---
const audioPlayer=document.getElementById("audioPlayer"), videoPlayer=document.getElementById("videoPlayer");
function uploadAudio(){ const file=document.getElementById("audioUpload").files[0]; if(file){ const url=URL.createObjectURL(file); audioTracks.push({name:file.name,url}); refreshAudio(); } }
function uploadVideo(){ const file=document.getElementById("videoUpload").files[0]; if(file){ const url=URL.createObjectURL(file); videoClips.push({name:file.name,url}); refreshVideo(); } }
function refreshAudio(){ let sel=document.getElementById("audioSelect"); sel.innerHTML=""; audioTracks.forEach(a=>sel.add(new Option(a.name,a.url))); }
function refreshVideo(){ let sel=document.getElementById("videoSelect"); sel.innerHTML=""; videoClips.forEach(v=>sel.add(new Option(v.name,v.url))); }
function playAudio(){ audioPlayer.src=document.getElementById("audioSelect").value; audioPlayer.play(); }
function playVideo(){ videoPlayer.src=document.getElementById("videoSelect").value; videoPlayer.play(); }
function forceDownload(url,name){ const a=document.createElement("a"); a.href=url; a.download=name||"media"; a.click(); }
function downloadAudio(){ let sel=document.getElementById("audioSelect"); if(sel.value) forceDownload(sel.value, sel.options[sel.selectedIndex].text); }
function downloadVideo(){ let sel=document.getElementById("videoSelect"); if(sel.value) forceDownload(sel.value, sel.options[sel.selectedIndex].text); }

window.onload=loadLists;
</script>
</body>
</html>